# Проект: Эмулятор файловой системы на основе zip-архива

## Описание
Этот проект представляет собой эмулятор файловой системы, работающий на основе zip-архива. Основная цель — предоставление базового интерфейса командной строки, позволяющего навигацию по архиву и выполнение команд, как в терминале. 

Эмулятор поддерживает следующие команды:
- `ls` — отображение списка файлов в текущей директории.
- `cd` — переход в другую директорию.
- `chown` — изменение владельца файла.
- `history` — отображение истории выполненных команд.
- `exit` — выход из эмулятора.

## Функции

### Глобальные переменные
- **history**: Список для хранения истории выполненных команд.
- **current_dir**: Текущая директория, в которой находится пользователь в эмуляторе.

### Классы
- **User**: Представляет структуру пользователя в эмуляторе. 
  - **Параметры**:
    - `name`: Имя пользователя.
    - `uid`: Уникальный идентификатор пользователя (UID).
    - `gid`: Идентификатор группы пользователя (GID).

### Основные функции
1. **open_zip(zip_path)**
   - Открывает zip-файл по указанному пути и возвращает объект `ZipFile`.
   - **Параметры**:
     - `zip_path` — путь к zip-файлу.
   - **Возвращает**:
     - `ZipFile` — объект архива, если файл открыт успешно, иначе `None` с сообщением об ошибке.
   
2. **ls(zip_fs, path)**
   - Отображает список файлов в указанной директории zip-архива.
   - **Параметры**:
     - `zip_fs` — объект `ZipFile`.
     - `path` — путь к директории, содержимое которой нужно отобразить.

3. **cd(zip_fs, dir)**
   - Изменяет текущую директорию в рамках архива.
   - **Параметры**:
     - `zip_fs` — объект `ZipFile`.
     - `dir` — директория для перехода.
   - Если директория не найдена, выводит сообщение об ошибке.

4. **show_history()**
   - Отображает историю команд, введенных пользователем.
   - **Параметры**: Отсутствуют.

5. **chown(owner, file, zip_fs)**
   - Меняет владельца файла на указанного пользователя.
   - **Параметры**:
     - `owner` — имя пользователя, который должен стать владельцем.
     - `file` — имя файла, для которого нужно изменить владельца.
     - `zip_fs` — объект `ZipFile`.
   - Если пользователь или файл не найден, выводит сообщение об ошибке.

6. **main()**
   - Основной цикл командного интерфейса.
   - Открывает zip-файл, обрабатывает команды пользователя, предоставляет интерфейс для выполнения команд и завершает работу при команде `exit`.

## Настройка и запуск проекта

### Требования
- Python 3.x
- Модуль `zipfile` (входит в стандартную библиотеку Python)

### Запуск
1. Убедитесь, что все файлы проекта, включая `main.py` и `main_test.py`, находятся в одной директории.
2. Для запуска эмулятора файловой системы выполните команду:

   ```bash
   python main.py


   
### Пример работы программы
![image](https://github.com/user-attachments/assets/92a3fb7f-20c3-4f55-ab6a-b2e4d4b940e8)

## Тестирование

Набор тестов проверяет функции для работы с zip-файлами, чтобы убедиться в их корректной работе в различных ситуациях. Тесты реализованы с использованием библиотеки `unittest`, и включают следующие проверки:

### 1. Успешное открытие zip-файла
Тест `test_open_zip_success` проверяет, что функция `open_zip` корректно открывает zip-файл и возвращает объект, отличный от `None`. В этом тесте используется макет (mock) для проверки успешного открытия файла.

### 2. Обработка ошибки при открытии поврежденного zip-файла
Тест `test_open_zip_failure` проверяет, что функция `open_zip` корректно обрабатывает случай поврежденного zip-файла, возвращая `None` вместо объекта файла. Здесь используется патч для эмуляции ошибки `BadZipFile`.

### 3. Успешный вывод списка файлов в директории
Тест `test_ls_success` проверяет, что функция `ls` правильно выводит список файлов в указанной директории внутри zip-архива. Используется патч для проверки, что `print` вызывает вывод нужных файлов.

### 4. Вывод пустого содержимого для несуществующей директории
Тест `test_ls_empty_directory` проверяет, что функция `ls` корректно обрабатывает запрос на вывод содержимого для пустой или несуществующей директории, выводя сообщение "Содержимое non_existent_dir:". Этот тест также использует патч для проверки корректности вывода.

### Запуск тестов
Чтобы запустить тесты, используйте следующую команду:

```bash
python -m unittest discover
```

```bash
pytest main_test.py
```
![image](https://github.com/user-attachments/assets/dd4b8502-ef02-45b9-ae90-3d0b4342ccf0)

